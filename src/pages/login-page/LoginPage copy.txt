<template>
  <q-page class="row items-center justify-center login-page">
    <q-card class="login-container flex flex-center column">
      <!-- โลโก้ -->
      <div class="text-center q-mb-lg">
        <div class="icon-container q-mb-md">
          <q-icon name="school" size="80px" color="white" />
        </div>
        <div class="text-h4 text-primary brand-title q-mt-lg q-mb-sm">Cooperative Education</div>
        <div class="text-subtitle1 text-primary brand-subtitle">
          ระบบสารสนเทศเพื่อการเก็บชั่วโมง<br class="mobile-break" />อบรมสหกิจศึกษา
        </div>
      </div>
      <div class="text-center q-mt-sm">
        <div class="text-h6 text-grey-9 brand-welcome">เข้าสู่ระบบเพื่อเริ่มต้นใช้งาน</div>
      </div>
      <!-- ปุ่มเข้าสู่ระบบด้วย Google -->
      <div class="text-center q-mt-md">
        <q-btn
          color="white"
          text-color="grey-8"
          class="google-login-btn"
          unelevated
          no-caps
          :loading="isGoogleLoggingIn"
          :disable="isGoogleLoggingIn"
          @click="handleGoogleLogin"
        >
          <template v-slot:default>
            <div class="row items-center no-wrap">
              <img
                src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_%22G%22_logo.svg/768px-Google_%22G%22_logo.svg.png"
                alt="Google"
                class="google-icon q-mr-sm"
              />
              <span>เข้าสู่ระบบด้วย Google</span>
            </div>
          </template>
        </q-btn>

        <!-- Security Badge -->
        <div class="security-badge text-center q-mt-lg">
          <q-icon name="shield" color="primary" size="18px" />
          <span class="text-body2 text-grey-7 q-ml-xs">การเข้าสู่ระบบปลอดภัยด้วย Google</span>
        </div>

        <!-- Footer Text -->
        <div class="footer-text text-center q-mt-md">
          <div class="text-caption text-grey-6">© 2025 Cooperative Education System</div>
        </div>
      </div>
    </q-card>
  </q-page>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { useQuasar } from 'quasar'
import AuthService from 'src/services/auth'

const $q = useQuasar()
const isGoogleLoggingIn = ref(false)

// ฟังก์ชันเข้าสู่ระบบด้วย Google
const handleGoogleLogin = async () => {
  try {
    isGoogleLoggingIn.value = true
    await AuthService.loginWithGoogle()
  } catch (error) {
    console.error('Login with Google error:', error)
    $q.notify({
      color: 'negative',
      message: 'ไม่สามารถเข้าสู่ระบบด้วย Google ได้',
      position: 'top',
      timeout: 3000,
    })
  } finally {
    isGoogleLoggingIn.value = false
  }
}
</script>

<style scoped>
.login-page {
  /* background: linear-gradient(135deg, #4a5fbf 0%, #2e3f80 50%, #1a2b5c 100%); */
  background: #2e3f80;
  min-height: 100vh;
  padding: 2rem;
}

.login-container {
  width: 540px;
  border-radius: 8px;
  padding: 3rem 2rem;
  text-align: center;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: slideUp 0.8s ease-out;
}

@keyframes slideUp {
  0% {
    opacity: 0;
    transform: translateY(30px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.icon-container {
  background: #2e3f80;
  border-radius: 50%;
  padding: 30px;
  display: inline-block;
  backdrop-filter: blur(10px);
  /* animation: float 3s ease-in-out infinite; */
}

@keyframes float {
  0%,
  100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
}

.brand-title {
  font-weight: 600;
  line-height: 1.2;
}

.brand-subtitle {
  opacity: 0.9;
  font-weight: 400;
}

/* ปุ่ม Google Login */
.google-login-btn {
  height: 48px;
  border-radius: 8px;
  font-weight: 600;
  font-size: 16px;
  border: 1px solid #dadce0;
  background: #ffffff;
  transition: all 0.2s ease;
  width: 100%;
  max-width: 300px;
  margin: 0 auto;
}

.google-login-btn:hover {
  background: #f8f9fa;
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.google-icon {
  width: 22px;
  height: 22px;
}

/* ปรับเฉพาะจอเล็ก เช่น มือถือ */
@media (max-width: 600px) {
  .brand-title {
    font-size: 1.5rem; /* เดิม text-h4 ~2rem */
    line-height: 1.3;
    margin-top: 0.5rem;
  }

  .brand-subtitle {
    font-size: 1rem; /* เดิม text-subtitle1 ~1.25rem */
    line-height: 1.4;
    padding: 0 1rem; /* เพิ่มช่องว่างข้าง */
    word-break: keep-all;
    text-align: center;
  }

  .brand-welcome {
    font-weight: 500;
    font-size: 1rem; /* เดิม text-subtitle1 ~1.25rem */
  }
}

@media (min-width: 601px) {
  .mobile-break {
    display: none;
  }
}
</style>
